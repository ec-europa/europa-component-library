<div class="ecl-mediagallery">
  {% if data.rows is defined and data.rows is iterable %}
  {% for row in data.rows %}
  <div class="ecl-row">
    {% if row is iterable %}
    {% for gallery_item in row %}
    <div class="{{ gallery_item.classes }} ecl-mediagallery__item">
      <div class="ecl-mediagallery__item-container">
        {% include '@ec-europa/ecl-images' with gallery_item.image %}
        {% if gallery_item.caption is defined %}
        <span class="ecl-mediagallery__caption">{{ gallery_item.caption }}</span>
        {% endif %}
        {% if gallery_item.icon is defined %}
        <span class="ecl-mediagallery__icon">
          <span class="ecl-icon {{ gallery_item.icon }}"></span>
        </span>
        {% endif %}
      </div>
    </div>
    {% endfor %}
    {% endif %}
  </div>
  {% endfor %}
  {% endif %}
</div>
