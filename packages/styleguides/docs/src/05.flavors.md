# Europa family and ECL flavors

From 2018 ECL (Europa Component Library) is containing 2 sets of components:

* Components for EC web applications
* Components for EU web applications

EU components are result of "Europa family" project.

## Design concept

Europa needs a recognisable online presence. Recognisable, but not completely identical and not so visually similar to the EC web presence so that users do not get confused.

To create this coherence, ECL components are re-used, together with a range of colour palettes based on the Europa site.

The EU inter components (i.e. EU flavor of ECL) are to be integrated on the Europa Component Library with demos and documentation.

The colour palette will be the same as used on Europa.eu, but with enlarged set of colours to offer customisation and to meet the Web Content Accessibility Guidelines that ensure that content is accessible by everyone, regardless of disability or user device. To meet these standards, text and interactive elements should have a colour contrast ratio of at least WCAG 2 AA Compliant (18pt+).

In the end, users and stakeholders will benefit from this. By using the same set of components (tested for accessibility and usability) we will improve efficiency, support DGs in their online communication and increase the quality of the whole «Europa Web Family».

### High-level changes in ECL

Here's a brief list of changes done in the ECL's project repository in order to accommodate the new EU-flavor components:

* The single [fractal configuration](https://fractal.build/guide/core-concepts/configuration-files) rendering a style guide for ECL compnents is now split into 3 different configuration files. All 3 sub-projects are managed under `./packages/styleguides` folder.
* Existing ECL components are moved as-is from `./framework` folder in a sub-folder `./src/flavors/ec`.
* EU-flavor components are placed into `./src/flavors/eu`.
* Visual regression testing configuration accept an optional `FLAVOR` environment variable. For further details, please check visual regression testing documentation pages.

### Development notes

The fact that ECL is to accommodate 2 separate sets of style guides, for each flavor, means that each flavor-specific style guide needs to be a separate fractal instance. Being a separate fractal instance bring these benefits:

* Concrete modifications in one flavor-specific style guide visualization will not affect the other style guide.
* Build process is straight-forward, an [default build capabilities of fractal](https://fractal.build/guide/project-settings) are used
* Work on components from a given flavor is independent from the work on components of the other flavor

At the same time, splitting work in per-flavor focus also means there are constraints:

* Templates of components in one flavor cannot be used by templates of the other flavor, i.e. `fractal.components.set` configuration option.

In short, this means that each flavor will have an independent set of:

* project configurations for title, statuses, etc. - anything defined in `fractal.js`
* components' templates
* `ecl-builder.config.js` configurations about how CSS, JS and other assets are managed
* each project lives and progresses independently from the other

### Maintaining flavors (Important notes on APIs)

The split of the project introduces several important rules which should be followed in order to keep ECL project repository maintainable for contributors, and also easy to integrate by consumers of ECL builds and resources.

#### Naming

Each flavor should be named in a distinguishable manner:

* In `package.json` one would have `@ec-europa/eu-logos`. `@ec-europa` namespace should be preserved for correct organization on [npmjs](https://www.npmjs.com/). The `eu-logos` is for the EU flavor, whereas `ec-logos` should be the one for the EC flavor.
* Components' files are to be named with `eu-` or `ec-` based on flavors: `eu-logos.twig`, `eu-logos.scss`, `eu-logos.config.js`, etc. This makes flavor-specific code to be easily discoverable in search, clear and simple enough, following existing patterns. (no underscores and suffixes)
* Twig templates should be prefixed with `@ec-europa/` in order to be consistently consumable by [Europa Component Library Twig loader](https://github.com/openeuropa/ecl-twig-loader)

Please note that all current EC-flavor components have preserved `@ec-europa/ecl-*` naming in order to give time for consumers of ECL components to plan changes based on flavors. The `@ec-europa/ecl-` namespace, in future, should be the place to store reusable parts of components such as mixins and variables.

Also, for keeping current consumption of ECL releases smooth for users, releases are to include `framework.zip` with this structure:

```
.
├── fonts
│   └── europa-icons
│       ├── europa-icons.eot
│       ├── europa-icons.svg
│       ├── europa-icons.ttf
│       └── europa-icons.woff
├── images
│   ├── arrow-down.svg
        ...
│   ├── favicon
│   │   ├── android-chrome-144x144.png
            ...
│   ├── live_streaming.svg
        ...
│   ├── logo
│   │   ├── logo--bg.svg
            ...
│   └── social
│       ├── arto_hover.svg
│       ├── arto.svg
            ...
├── scripts
│   ├── europa-corporate.js
│   └── europa.js
└── styles
    ├── europa-base.css
    ├── europa-base.css.map
    ├── europa-corporate.css
    ├── europa-corporate.css.map
    ├── europa.css
    ├── europa.css.map
    ├── europa-editor.css
    └── europa-editor.css.map
```
