language: node_js
node_js:
  - "7"

cache:
  apt: true
  yarn: true
  directories:
    - node_modules

before_script:
  - npm install -g s3-website
after_success:
  - npm run dist
  # AWS_ACCESS_Id and AWS_ACCESS_KEY are set in the travis repo settings as they are private-private!
  # - npm run create-preview
  # User the pull request number to create a new domain name
  - s3-website create ecl-$TRAVIS_PULL_REQUEST -u dist/
  - s3-website deploy
