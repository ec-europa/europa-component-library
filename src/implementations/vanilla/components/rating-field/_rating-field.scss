/* stylelint-disable no-descending-specificity */

/**
 * Rating field
 * @define rating-field
 */

@use 'sass:map';
@use '@ecl/theme-dev/theme';
@use '@ecl/vanilla-layout-grid/mixins/breakpoints';

.ecl-rating-field {
  display: inline-flex;

  // flex-direction: row-reverse;

  /* .ecl-rating-field__input:checked
    ~ .ecl-rating-field__label
    .ecl-rating-field__icon-filled,
  &:not(.ecl-rating-field--disabled)
    > .ecl-rating-field__label:hover
    .ecl-rating-field__icon-filled,
  &:not(.ecl-rating-field--disabled)
    > .ecl-rating-field__label:hover
    ~ .ecl-rating-field__label
    .ecl-rating-field__icon-filled {
    display: inline-block;
  }

  .ecl-rating-field__input:checked
    ~ .ecl-rating-field__label
    .ecl-rating-field__icon-outline,
  &:not(.ecl-rating-field--disabled)
    > .ecl-rating-field__label:hover
    .ecl-rating-field__icon-outline,
  &:not(.ecl-rating-field--disabled)
    > .ecl-rating-field__label:hover
    ~ .ecl-rating-field__label
    .ecl-rating-field__icon-outline {
    display: none;
  } */
}

@mixin display-filled {
  .ecl-rating-field__icon-filled {
    display: inline-block;
  }

  .ecl-rating-field__icon-outline {
    display: none;
  }
}

@mixin display-outline {
  .ecl-rating-field__icon-filled {
    display: none;
  }

  .ecl-rating-field__icon-outline {
    display: inline-block;
  }
}

// Default icon display
.ecl-rating-field__icon-filled {
  display: inline-block;
  fill: map.get(theme.$color, 'yellow-100');
}

.ecl-rating-field__icon-outline {
  display: none;
  fill: map.get(theme.$color, 'grey-75');
}

// Highlight checked star, and all previous ones
.ecl-rating-field .ecl-rating-field__input:checked ~ .ecl-rating-field__label {
  @include display-outline;
}

.ecl-rating-field .ecl-rating-field__input:checked + .ecl-rating-field__label {
  @include display-filled;
}

// Highlight stars on hover / focus
.ecl-rating-field:not(.ecl-rating-field--disabled):hover
  .ecl-rating-field__input
  + .ecl-rating-field__label {
  @include display-filled;
}

.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:hover
  ~ .ecl-rating-field__label,
.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:focus
  ~ .ecl-rating-field__label {
  @include display-outline;
}

.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:hover
  + .ecl-rating-field__label,
.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:focus
  + .ecl-rating-field__label {
  @include display-filled;
}

// Hide html input
.ecl-rating-field__input {
  border: 0;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

// Focus, active state
.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:focus,
.ecl-rating-field:not(.ecl-rating-field--disabled)
  .ecl-rating-field__input:active {
  + .ecl-rating-field__label {
    outline: 2px solid map.get(theme.$color, 'blue-100');
  }
}

.ecl-rating-field__label {
  cursor: pointer;
  padding-inline-end: calc(#{map.get(theme.$spacing, 'xs')} / 2);
  padding-inline-start: calc(#{map.get(theme.$spacing, 'xs')} / 2);

  .ecl-rating-field--disabled & {
    cursor: default;
  }
}

/* stylelint-disable-next-line order/order */
@include breakpoints.up('s') {
  .ecl-rating-field__label {
    padding-inline-end: calc(#{map.get(theme.$spacing, '2xs')} / 2);
    padding-inline-start: calc(#{map.get(theme.$spacing, '2xs')} / 2);
  }
}
