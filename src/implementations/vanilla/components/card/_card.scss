/**
 * Card
 * @define card; weak
 */

@use 'sass:math';
@use 'sass:map';
@use '@ecl/theme-dev/theme';
@use '@ecl/vanilla-layout-grid/mixins/breakpoints';

$_border-radius: null !default;
$_shadow: null !default;
$_card-background: null !default;
$_card-border: null !default;
$_general-spacing: null !default;
$_image-margin: null !default;
$_body-padding-top: null !default;
$_body-padding-bottom: null !default;
$_meta-color: null !default;
$_text-color: null !default;
$_title: null !default;
$_separator-color: null !default;
$_taxonomy-container-border-top: null !default;
$_list-margin: null !default;
$_list-padding: null !default;

.ecl-card {
  background-color: $_card-background;
  border: $_card-border;
  border-radius: $_border-radius;
  box-shadow: $_shadow;
  box-sizing: border-box;
  height: 100%;
  margin: 0;
  overflow: hidden;
  overflow-wrap: break-word;
  width: 100%;
}

.ecl-card__image {
  background-position: center;
  background-size: cover;
  display: block;
  height: auto;
  margin-inline-start: $_image-margin;
  margin-inline-end: $_image-margin;
  margin-top: $_image-margin;
  width: calc(100% - (2 * #{$_image-margin}));

  // manage ratio 3:2
  &::before {
    content: '';
    display: block;
    padding-top: math.div(2, 3) * 100%;
    width: 100%;
  }
}

.ecl-card__body {
  padding: $_body-padding-top $_general-spacing $_body-padding-bottom
    $_general-spacing;
  position: relative;
}

.ecl-card__meta {
  color: $_meta-color;
  font: map.get(theme.$font, 's');
  margin-bottom: map.get(theme.$spacing, 'xs');
}

.ecl-card__meta-item {
  border-inline-end: 1px solid $_meta-color;
  display: inline-block;
  margin-inline-end: map.get(theme.$spacing, 'xs');
  padding-inline-end: map.get(theme.$spacing, 'xs');

  &:first-of-type {
    text-transform: uppercase;
  }

  &:last-of-type {
    border-inline-end-width: 0;
    margin-inline-end: 0;
    padding-inline-end: 0;
  }
}

.ecl-card__title {
  color: $_text-color;
  font: $_title;
  font-weight: map.get(theme.$font-weight, 'bold');
  margin-bottom: 0;
  margin-top: 0;
}

.ecl-card__description {
  color: $_text-color;
  font: map.get(theme.$font-prolonged, 'm');
  margin-top: map.get(theme.$spacing, 'xs');
}

.ecl-card__label-container {
  display: inline-flex;
  flex-wrap: wrap;
  list-style: none;
  margin: 0 -#{$_general-spacing} 0 -#{$_general-spacing};
  padding: 0 $_general-spacing 0 $_general-spacing;
  width: 100%;
}

.ecl-card__label-item {
  margin-bottom: map.get(theme.$spacing, 'm');
  margin-inline-end: map.get(theme.$spacing, 'xs');

  &:last-child {
    margin-inline-end: 0;
  }
}

.ecl-card__info-container {
  list-style: none;
  margin-bottom: 0;
  margin-top: map.get(theme.$spacing, 'm');
  padding: 0;
}

.ecl-card__info-item {
  align-content: center;
  color: $_meta-color;
  display: flex;
  font: map.get(theme.$font, 's');
  margin-top: map.get(theme.$spacing, 'xs');

  &:first-child {
    margin-top: 0;
  }
}

.ecl-card__info-label {
  margin-inline-start: map.get(theme.$spacing, 'xs');
}

.ecl-card__link-container {
  list-style: none;
  margin-bottom: 0;
  margin-top: $_body-padding-bottom;
  padding: 0;
}

.ecl-card__link-container + .ecl-card__link-container {
  border-top: 1px solid $_separator-color;
  padding-top: map.get(theme.$spacing, 'm');
}

.ecl-card__link-item {
  margin-top: map.get(theme.$spacing, 'xs');

  &:first-child {
    margin-top: 0;
  }
}

.ecl-card__link {
  display: block;
  font: map.get(theme.$font, 's');
}

.ecl-card__tag-container {
  display: inline-flex;
  flex-wrap: wrap;
  list-style: none;
  margin-top: map.get(theme.$spacing, 'm');
  padding-inline-start: 0;
  width: 100%;
}

.ecl-card__tag-item {
  margin-inline-end: map.get(theme.$spacing, 'xs');

  &:last-child {
    margin-inline-end: 0;
  }
}

.ecl-card__list {
  border-top: $_taxonomy-container-border-top;
  flex-direction: column;
  margin-inline-start: $_list-margin;
  margin-inline-end: $_list-margin;
  margin-top: map.get(theme.$spacing, 'm');
  max-width: 100%;
  padding-inline-start: $_list-padding;
  padding-inline-end: $_list-padding;
  padding-top: map.get(theme.$spacing, 'm');

  /* stylelint-disable plugin/selector-bem-pattern */
  .ecl-description-list__term {
    width: auto;
  }

  .ecl-description-list__definition {
    margin-inline-start: 0;
    margin-top: map.get(theme.$spacing, 'xs');
    width: auto;
  }

  .ecl-description-list__definition:first-of-type {
    margin-top: map.get(theme.$spacing, 'xs');
  }

  /* stylelint-enable plugin/selector-bem-pattern */
  + .ecl-card__list {
    margin-top: map.get(theme.$spacing, 's');
    padding-top: map.get(theme.$spacing, 's');
  }
}

/*
 * Spacing adjustment
 */
.ecl-card__body > :first-child {
  margin-top: 0;
  padding-top: 0;
}

.ecl-card__body > :last-child {
  margin-bottom: 0;
}
