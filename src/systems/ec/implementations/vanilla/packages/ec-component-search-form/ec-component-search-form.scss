/**
 * Search form
 * @define search-form; weak
 */

// Import base
@import '@ecl/ec-base/ec-base';

// Check if overridden dependencies are already loaded, if needed
@include check-imports(('ec-component-form-text-input', 'ec-component-button'));

@mixin ecl-search-form(
  $form-width-desktop: 31.25rem,
  $border-color: $ecl-color-grey-50
) {
  .ecl-search-form {
    display: flex;
    margin: 0;
    position: relative;
    width: 100%;
  }

  .ecl-search-form .ecl-text-input__wrapper {
    flex-grow: 1;
  }

  .ecl-search-form .ecl-form-group--text-input {
    display: flex;
    flex-grow: 1;
    max-width: 100%;
  }

  .ecl-search-form__text-input {
    border-bottom-color: $border-color;
    border-left-color: $border-color;
    border-right-width: 0;
    border-top-color: $border-color;
    margin: 0;
    max-width: 100%;
  }

  .ecl-search-form__button {
    border-bottom: 1px solid $border-color;
    border-left-width: 0;
    border-right: 1px solid $border-color;
    border-top: 1px solid $border-color;
    padding: calc(#{$ecl-spacing-s} - 1px);
  }

  .ecl-search-form__button .ecl-button__label {
    display: none;
  }

  .ecl-search-form__button .ecl-button__icon {
    display: block;
    fill: currentColor;
    margin: 0;
  }

  /* stylelint-disable-next-line order/order */
  @include ecl-media-breakpoint-up(lg) {
    .ecl-search-form {
      max-width: $form-width-desktop;
    }

    .ecl-search-form__button {
      padding-left: calc(#{$ecl-spacing-m} - 1px);
      padding-right: calc(#{$ecl-spacing-m} - 1px);
    }

    .ecl-search-form__button .ecl-button__label {
      display: block;
    }

    .ecl-search-form__button .ecl-button__icon {
      display: none;
    }
  }
}

// Use mixin
@include exports('ec-component-search-form') {
  @include ecl-search-form();
}
